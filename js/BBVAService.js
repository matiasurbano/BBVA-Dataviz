function setHeader(xhr) {
  xhr.setRequestHeader('Authorization', 'YXBwLmJidmEubWF0aWFzdXJiYW5vZGV2YXBwOjBkOGQ5NDA3YjY5MTA5ZjUwNDIwMjY1ODkxZDM1YjE2MDRjYWFmYTI=');
}


var BBVAService = {

  api_appName: 'dataViz',
  api_appId: 'app.bbva.matiasurbanodevapp',
  api_appKey: '0d8d9407b69109f50420265891d35b1604caafa2',
  api_basic: 'YXBwLmJidmEubWF0aWFzdXJiYW5vZGV2YXBwOjBkOGQ5NDA3YjY5MTA5ZjUwNDIwMjY1ODkxZDM1YjE2MDRjYWFmYTI=',


  getCategories: function (callback) {
    var uri = 'https://apis.bbvabancomer.com/datathon/info/merchants_categories';

    $.ajax({
      url: uri,
      type: 'GET',
      dataType: 'json',
      success: function (data) {
        if (data.result.code === 200) {
          callback(data.data.categories);
        }
      },
      error: function () {
        console.log('Error getting categories.');
      },
      beforeSend: setHeader
    });

  },
  getRankingZipcodes_offline_index : function(zipcode){
    var mx_df_ranking_zipcodes=["16880","16870","16810","16808","16800","16797","16750","16740","16739","16720","16710","16640","16629","16610","16600","16520","16450","16440","16430","16420","16410","16400","16320","16300","16240","16210","16200","16090","16080","16070","16060","16050","16040","16038","16036","16035","16034","16030","16029","16020","16010","16000","15990","15980","15970","15960","15950","15940","15900","15870","15850","15840","15830","15820","15810","15800","15750","15740","15730","15700","15680","15670","15660","15650","15640","15630","15620","15610","15600","15540","15530","15520","15510","15500","15470","15460","15450","15440","15430","15420","15410","15400","15390","15370","15350","15340","15320","15310","15309","15300","15290","15280","15270","15250","15240","15230","15220","15210","15200","15120","15100","15020","15010","15000","14900","14749","14748","14740","14739","14738","14737","14735","14734","14730","14720","14710","14700","14650","14646","14640","14630","14629","14620","14610","14608","14600","14520","14500","14490","14480","14460","14449","14440","14439","14430","14429","14428","14427","14426","14420","14410","14400","14390","14389","14388","14387","14386","14380","14378","14377","14376","14370","14360","14357","14350","14340","14338","14337","14336","14335","14334","14330","14326","14325","14324","14320","14310","14308","14307","14300","14275","14270","14269","14268","14267","14266","14250","14248","14239","14230","14220","14210","14209","14200","14160","14150","14140","14130","14120","14110","14100","14090","14080","14070","14060","14050","14049","14040","14039","14030","14020","14018","14010","14000","10720","13700","13640","13625","13600","13550","13530","13520","13510","13508","13460","13450","13440","13430","13420","13419","13400","13360","13319","13310","13300","13280","13278","13273","13270","13250","13230","13220","13219","13210","13200","13150","13120","13100","13099","13080","13070","13060","13050","13040","13030","13020","13010","13000","12700","12500","12400","12300","12250","12200","12100","12000","11950","11930","11910","11870","11860","11850","11840","11830","11820","11810","11800","11700","11650","11600","11590","11580","11560","11550","11540","11530","11529","11520","11510","11500","11490","11489","11480","11470","11460","11450","11440","11430","11420","11410","11400","11370","11360","11350","11340","11330","11320","11310","11300","11290","11289","11280","11270","11260","11250","11230","11220","11210","11200","11100","11040","11000","10910","10900","10840","10830","10820","10800","10740","10710","10700","10640","10620","10610","10600","10580","10500","10400","10380","10370","10369","10360","10350","10340","10320","10300","10200","10110","10100","10020","10010","10000","09970","09960","09940","09930","09920","09910","09900","09890","09880","09870","09860","09859","09850","09840","09839","09838","09837","09830","09828","09820","09819","09810","09800","09790","09780","09770","09760","09750","09740","09730","09720","09710","09708","09700","09698","09696","09690","09670","09660","09640","09638","09630","09620","09609","09608","09600","09578","09550","09530","09520","09510","09500","09480","09479","09470","09460","09450","09440","09438","09430","09420","09410","09400","09360","09330","09319","09310","09300","09290","09280","09270","09260","09249","09240","09239","09230","09229","09227","09225","09220","09219","09210","09209","09208","09200","09180","09170","09160","09140","09130","09110","09100","09099","09090","09089","09080","09070","09060","09040","09020","09010","09000","08930","08920","08910","08900","08840","08830","08820","08810","08800","08770","08760","08730","08710","08700","08650","08620","08610","08600","08510","08500","08420","08400","08320","08310","08300","08240","08230","08220","08210","08200","08100","08040","08020","08010","08000","07990","07980","07979","07970","07969","07960","07950","07940","07939","07930","07920","07918","07910","07900","07899","07890","07889","07880","07870","07860","07859","07858","07850","07840","07839","07830","07820","07810","07800","07790","07780","07770","07760","07750","07740","07738","07730","07720","07710","07708","07707","07700","07680","07670","07650","07640","07630","07620","07600","07580","07570","07560","07550","07540","07530","07520","07510","07509","07500","07480","07470","07469","07460","07459","07458","07457","07455","07450","07440","07430","07420","07410","07400","07380","07370","07369","07360","07359","07350","07349","07340","07330","07320","07310","07300","07290","07280","07279","07270","07269","07268","07250","07249","07240","07230","07210","07209","07207","07200","07190","07188","07187","07180","07170","07160","07140","07130","07119","07110","07100","07090","07089","07080","07070","07060","07058","07050","07040","07020","07010","07000","06920","06900","06890","06880","06870","06860","06850","06840","06820","06800","06780","06760","06740","06720","06700","06600","06500","06470","06450","06430","06400","06350","06300","06280","06270","06250","06240","06220","06200","06170","06140","06100","06030","06010","05780","05760","05700","05600","05530","05520","05500","05410","05370","05360","05348","05330","05310","05280","05270","05260","05240","05200","05130","05129","05120","05110","05100","05050","05030","05020","05010","05000","04980","04970","04960","04950","04940","04939","04938","04930","04929","04920","04919","04918","04910","04909","04908","04899","04890","04870","04830","04815","04810","04800","04739","04737","04730","04720","04710","04700","04660","04650","04640","04630","04620","04610","04600","04530","04500","04490","04489","04480","04470","04460","04450","04440","04410","04400","04390","04380","04370","04369","04360","04350","04340","04330","04320","04319","04318","04310","04309","04300","04280","04260","04250","04240","04230","04220","04210","04200","04120","04110","04100","04040","04030","04020","04010","04000","03940","03930","03920","03910","03900","03820","03810","03800","03740","03730","03720","03710","03700","03660","03650","03640","03630","03620","03610","03600","03590","03580","03570","03560","03550","03540","03530","03520","03510","03500","03440","03430","03420","03410","03400","03340","03330","03320","03310","03303","03300","03240","03230","03220","03200","03104","03103","03100","03023","03020","03010","03000","02990","02980","02970","02960","02950","02940","02930","02920","02910","02900","02870","02860","02850","02840","02830","02810","02800","02790","02780","02770","02760","02750","02730","02729","02720","02719","02710","02700","02680","02670","02660","02650","02640","02630","02600","02540","02530","02519","02510","02500","02490","02480","02470","02460","02459","02450","02440","02430","02420","02410","02400","02360","02350","02340","02330","02320","02310","02300","02250","02240","02230","02200","02169","02160","02150","02140","02130","02129","02128","02127","02125","02120","02110","02100","02099","02090","02080","02070","02060","02050","02040","02020","02010","01900","01870","01860","01840","01830","01820","01810","01800","01790","01789","01780","01770","01760","01759","01750","01740","01730","01729","01720","01710","01708","01700","01650","01645","01640","01630","01620","01618","01610","01600","01590","01580","01566","01560","01540","01539","01530","01520","01510","01500","01490","01480","01470","01460","01450","01430","01420","01419","01410","01408","01400","01389","01377","01340","01330","01320","01298","01296","01290","01280","01270","01269","01260","01259","01250","01230","01220","01219","01210","01209","01200","01180","01170","01160","01150","01140","01130","01120","01110","01109","01100","01090","01089","01080","01070","01060","01050","01049","01048","01040","01030","01020","01010","01000"];

    return (mx_df_ranking_zipcodes.indexOf(zipcode)>1)
  },
  getRankingZipcodes: function (callback) {
    var uri = 'https://apis.bbvabancomer.com/datathon/info/zipcodes';

    $.ajax({
      url: uri,
      type: 'GET',
      dataType: 'json',
      success: function (data) {
        if (data.result.code === 200) {
          callback(data.data.zip_codes);
        }
      },
      error: function () {
        console.log('Error getting categories.');
      },
      beforeSend: setHeader
    });

  },
  getCustomerZipCodes: function(zipcode,category_code,min_date,max_date,order_by,callback){
    var uri = 'https://apis.bbvabancomer.com/datathon/zipcodes/_ZIPCODE_/customer_zipcodes';
    uri = uri.replace('_ZIPCODE_',zipcode);

    $.ajax({
      url: uri,
      type: 'GET',
      dataType: 'json',
      success: function (data) {
        if (data.result.code === 200) {
          callback(data.data.stats);
        }
      },
      error: function () {
        console.log('Error getting categories.');
      },
      beforeSend: setHeader
    });
  }


};